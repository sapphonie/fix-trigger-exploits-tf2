# trigger exploit fix [TF2]

This SourceMod plugin fixes a very specific bug with some maps in TF2.

### The bug in question: 
Watch this video: https://www.youtube.com/watch?v=oTpsoMjlTFw

Notice how the flamethrower from the dead pyro falls directly into the hole at the end of the map (`pl_barnblitz_pro6`), and triggers the end-of-round explosion.

### Why it happens:

Triggers in tf2 can have any of these flags:

![](https://i.imgur.com/UEYXLlG.png)

If a trigger has the highlighted "Physics debris" flag, it can be triggered by weapons dropped off dead players. Dropped weapons [are already set to specifically not set off triggers ](https://github.com/TheAlePower/TeamFortress2/blob/1b81dded673d49adebf4d0958e52236ecc28a956/tf2_src/game/shared/tf/tf_dropped_weapon.cpp#L90-L103) - and if they were supposed to set off triggers, they would have the collision flag `COLLISION_GROUP_DEBRIS_TRIGGER`, so I can only assume this is a bug. Probably.

This plugin fixes that bug, and prevents players from abusing this bug and ending rounds early on payload maps where this flag isn't already set.

Thanks to some folks in the SourceMod discord for some help.

### How to install this plugin:

(coming soon)
